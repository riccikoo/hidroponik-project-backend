<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - HydroGrow</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo-putih.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- ====== SIDEBAR ====== -->
    <div class="sidebar">
        <div class="logo">
            <img src="{{ url_for('static', filename='img/logo-putih.png') }}" alt="HydroGrow Logo" class="logo-img">
            <h2>HydroGrow</h2>
        </div>
        <nav>
            <a href="/dashboard" class="nav-item">
                <span class="icon">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                </span>
                <span>Dashboard</span>
            </a>
            <a href="/riwayat" class="nav-item">
                <span class="icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </span>
                <span>Riwayat</span>
            </a>
            <a href="/profile" class="nav-item active">
                <span class="icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M20 21a8 8 0 1 0-16 0"/>
                    </svg>
                </span>
                <span>Profile</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <a href="/" class="logout-btn">
                <span class="icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </span>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- ====== MAIN CONTENT ====== -->
    <div class="main-content">

        <!-- Header -->
        <header>
            <div class="header-left">
                <h1>Profile Pengguna</h1>
                <p>Kelola informasi akun dan pengaturan Anda</p>
            </div>
            <div class="header-right">
                <div class="connection-status">
                    <span class="status-dot active"></span>
                    <span>ESP32 Connected</span>
                </div>
            </div>
        </header>

        <!-- ====== PROFILE SECTION ====== -->
        <section class="profile-section">
            <div class="profile-container">

                <!-- Profile Card -->
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="8" r="5"/>
                                <path d="M20 21a8 8 0 1 0-16 0"/>
                            </svg>
                        </div>
                        <div class="profile-info">
                            <h2>{{ user_name }}</h2>
                            <p class="profile-role">
                                <svg viewBox="0 0 24 24">
                                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                Administrator
                            </p>
                        </div>
                        <button class="btn-edit-avatar">
                            <svg viewBox="0 0 24 24">
                                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                        </button>
                    </div>

                    <div class="profile-stats">
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <div>
                                <strong>45 Hari</strong>
                                <p>Bergabung</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                            </svg>
                            <div>
                                <strong>1,234</strong>
                                <p>Data Sensor</p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            <div>
                                <strong>98.5%</strong>
                                <p>Uptime</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Account Information -->
                <div class="info-card">
                    <div class="card-header">
                        <h3>
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                            Informasi Akun
                        </h3>
                        <button class="btn-edit">
                            <svg viewBox="0 0 24 24">
                                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            Edit
                        </button>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Nama Lengkap</label>
                            <p>{{ user_name }}</p>
                        </div>
                        <div class="info-item">
                            <label>Email</label>
                            <p>user@hydrogrow.com</p>
                        </div>
                        <div class="info-item">
                            <label>Nomor Telepon</label>
                            <p>+62 812-3456-7890</p>
                        </div>
                        <div class="info-item">
                            <label>Lokasi</label>
                            <p>Bandung, Indonesia</p>
                        </div>
                    </div>
                </div>

                <!-- System Settings -->
                <div class="info-card">
                    <div class="card-header">
                        <h3>
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.9,12.66a1,1,0,0,1,0-1.32L21.18,9.9a1,1,0,0,0,.12-1.17l-2-3.46a1,1,0,0,0-1.07-.48l-1.88.38a1,1,0,0,1-1.15-.66l-.61-1.83A1,1,0,0,0,13.64,2h-4a1,1,0,0,0-1,.68L8.08,4.51a1,1,0,0,1-1.15.66L5,4.79A1,1,0,0,0,4,5.27L2,8.73A1,1,0,0,0,2.1,9.9l1.27,1.44a1,1,0,0,1,0,1.32L2.1,14.1A1,1,0,0,0,2,15.27l2,3.46a1,1,0,0,0,1.07.48l1.88-.38a1,1,0,0,1,1.15.66l.61,1.83a1,1,0,0,0,1,.68h4a1,1,0,0,0,.95-.68l.61-1.83a1,1,0,0,1,1.15-.66l1.88.38a1,1,0,0,0,1.07-.48l2-3.46a1,1,0,0,0-.12-1.17ZM18.41,14l.8.9-1.28,2.22-1.18-.24a3,3,0,0,0-3.45,2L12.92,20H10.36L10,18.86a3,3,0,0,0-3.45-2l-1.18.24L4.07,14.89l.8-.9a3,3,0,0,0,0-4l-.8-.9L5.35,6.89l1.18.24a3,3,0,0,0,3.45-2L10.36,4h2.56l.38,1.14a3,3,0,0,0,3.45,2l1.18-.24,1.28,2.22-.8.9A3,3,0,0,0,18.41,14ZM11.64,8a4,4,0,1,0,4,4A4,4,0,0,0,11.64,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,11.64,14Z"/>
                            </svg>
                            Pengaturan Sistem
                        </h3>
                    </div>
                    <div class="settings-list">
                        <div class="setting-item">
                            <div class="setting-info">
                                <svg viewBox="0 0 24 24">
                                    <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                                    <path d="M13.73 21a2 2 0 01-3.46 0"/>
                                </svg>
                                <div>
                                    <strong>Notifikasi Push</strong>
                                    <p>Terima notifikasi untuk alert sensor</p>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <svg viewBox="0 0 24 24">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                                <div>
                                    <strong>Email Alert</strong>
                                    <p>Kirim email untuk kondisi darurat</p>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <svg viewBox="0 0 24 24">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0110 0v4"/>
                                </svg>
                                <div>
                                    <strong>Autentikasi 2 Faktor</strong>
                                    <p>Keamanan tambahan untuk akun Anda</p>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12 1a3 3 0 003 3 3 3 0 003-3 3 3 0 00-3 3 3 3 0 00-3-3"/>
                                    <path d="M19 21v-2a4 4 0 00-4-4H9a4 4 0 00-4 4v2"/>
                                    <circle cx="12" cy="11" r="4"/>
                                </svg>
                                <div>
                                    <strong>Mode Gelap</strong>
                                    <p>Tampilan dengan skema warna gelap</p>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Device Information -->
                <div class="info-card">
                    <div class="card-header">
                        <h3>
                            <svg viewBox="0 0 24 24">
                                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                                <path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/>
                            </svg>
                            Informasi Perangkat
                        </h3>
                    </div>
                    <div class="device-grid">
                        <div class="device-item">
                            <div class="device-icon">
                                <svg viewBox="0 0 24 24">
                                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                                    <path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/>
                                </svg>
                            </div>
                            <div>
                                <label>Device ID</label>
                                <p>ESP32-HG-001</p>
                            </div>
                        </div>
                        <div class="device-item">
                            <div class="device-icon">
                                <svg viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="2" y1="12" x2="22" y2="12"/>
                                    <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
                                </svg>
                            </div>
                            <div>
                                <label>IP Address</label>
                                <p>192.168.1.100</p>
                            </div>
                        </div>
                        <div class="device-item">
                            <div class="device-icon">
                                <svg viewBox="0 0 24 24">
                                    <path d="M5 12.55a11 11 0 0114.08 0"/>
                                    <path d="M1.42 9a16 16 0 0121.16 0"/>
                                    <path d="M8.53 16.11a6 6 0 016.95 0"/>
                                    <line x1="12" y1="20" x2="12.01" y2="20"/>
                                </svg>
                            </div>
                            <div>
                                <label>Koneksi</label>
                                <p>WiFi - Tersambung</p>
                            </div>
                        </div>
                        <div class="device-item">
                            <div class="device-icon">
                                <svg viewBox="0 0 24 24">
                                    <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                    <line x1="12" y1="22.08" x2="12" y2="12"/>
                                </svg>
                            </div>
                            <div>
                                <label>Firmware</label>
                                <p>v2.1.3</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn-secondary">
                        <svg viewBox="0 0 24 24">
                            <polyline points="23 4 23 10 17 10"/>
                            <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/>
                        </svg>
                        Reset Password
                    </button>
                    <button class="btn-danger">
                        <svg viewBox="0 0 24 24">
                            <path d="M3 6h18"/>
                            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                        </svg>
                        Hapus Akun
                    </button>
                </div>

            </div>
        </section>

    </div>

    <script>
        // Toggle switch functionality
        document.querySelectorAll('.toggle-switch input').forEach(toggle => {
            toggle.addEventListener('change', function() {
                console.log(`${this.parentElement.parentElement.querySelector('strong').textContent} is ${this.checked ? 'ON' : 'OFF'}`);
                // TODO: Kirim ke backend untuk update settings
            });
        });

        // Edit button functionality
        document.querySelectorAll('.btn-edit').forEach(btn => {
            btn.addEventListener('click', function() {
                alert('Fitur edit akan segera hadir!');
                // TODO: Implementasi form edit
            });
        });

        document.querySelector('.btn-edit-avatar')?.addEventListener('click', function() {
            alert('Fitur upload avatar akan segera hadir!');
            // TODO: Implementasi upload avatar
        });

        // Action buttons
        document.querySelector('.btn-secondary')?.addEventListener('click', function() {
            if(confirm('Apakah Anda yakin ingin mereset password?')) {
                alert('Link reset password telah dikirim ke email Anda');
                // TODO: Kirim reset password request
            }
        });

        document.querySelector('.btn-danger')?.addEventListener('click', function() {
            if(confirm('PERINGATAN: Akun Anda akan dihapus permanen. Apakah Anda yakin?')) {
                alert('Akun telah dihapus');
                // TODO: Implementasi delete account
            }
        });
    </script>
</body>
</html>